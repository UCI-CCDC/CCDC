- name: Run Audit Script on Inventory Hosts
  hosts: all
  become: true
  vars:
    op: "{{ operation }}"
    aptPackages: "sudo nmap tmux vim hostname htop clamav lynis debsums"
    otherPackages: "sudo nmap tmux vim hostname htop clamav lynis"
  tasks:
    - include: ./packageInstallations/aptPackage.yml
      when: op == "i" and ansible_pkg_mgr == 'apt'
    - include: ./packageInstallations/yumPackage.yml
      when: op == "i" and ansible_pkg_mgr == 'yum'
    - include: ./packageInstallations/pacmanPackage.yml
      when: op == "i" and ansible_pkg_mgr == 'pacman'
    - include: ./packageInstallations/apkPackage.yml
      when: op == "i" and ansible_pkg_mgr == 'apk'

    - name: Display help
      script: ../audit.sh -h
      when: op == "h"

    - debug: msg="{{ output }}"